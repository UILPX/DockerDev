<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script>
function getBrowserId(){
  let bid=localStorage.getItem("reaction_bid");
  if(bid) return bid;
  const bytes=new Uint8Array(16);
  crypto.getRandomValues(bytes);
  bid=Array.from(bytes).map(b=>b.toString(16).padStart(2,"0")).join("");
  localStorage.setItem("reaction_bid",bid);
  return bid;
}

const bid=getBrowserId();

fetch(`/api/me?bid=${bid}`)
  .then(r=>r.json())
  .then(j=>{
    if(!j.ok || !j.claimed){
      window.location.href="/welcome.html";
    }else{
      window.location.href="/modes.html";
    }
  });
</script>
</head>
<body></body>
</html>